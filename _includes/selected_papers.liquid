<!-- Keyword Filter Buttons -->
<div class="keyword-filter-buttons mb-3">
  <button class="filter-btn active" data-filter="all">
    <i class="fas fa-star"></i> All
  </button>
  <button class="filter-btn" data-filter="computer science">
    <i class="fas fa-laptop-code"></i> CS & Finance
  </button>
  <button class="filter-btn" data-filter="finance">
    <i class="fas fa-chart-line"></i> Finance Only
  </button>
</div>

<div class="publications" id="selected-publications">
  {% bibliography --group_by none --query @*[selected=true]* %}
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const filterButtons = document.querySelectorAll('.keyword-filter-buttons .filter-btn');
    const publications = document.querySelectorAll('#selected-publications .bibliography li');

    filterButtons.forEach((button) => {
      button.addEventListener('click', function () {
        // Remove active class from all buttons
        filterButtons.forEach((btn) => btn.classList.remove('active'));
        // Add active class to clicked button
        this.classList.add('active');

        const filter = this.getAttribute('data-filter');

        publications.forEach((pub) => {
          if (filter === 'all') {
            pub.style.display = 'block';
          } else {
            const pubContent = pub.textContent.toLowerCase();
            let shouldShow = false;

            if (filter === 'computer science') {
              // Show CS & Finance interdisciplinary papers
              shouldShow = (pubContent.includes('computer science') ||
                           pubContent.includes('naacl') ||
                           pubContent.includes('iclr') ||
                           pubContent.includes('llm') ||
                           pubContent.includes('language model') ||
                           pubContent.includes('benchmark') ||
                           pubContent.includes('multimodal')) && 
                           pubContent.includes('finance');
            } else if (filter === 'finance') {
              // Show finance-only papers (exclude CS+Finance interdisciplinary)
              shouldShow = pubContent.includes('finance') &&
                          !pubContent.includes('computer science') &&
                          !pubContent.includes('naacl') &&
                          !pubContent.includes('iclr') &&
                          !pubContent.includes('llm') &&
                          !pubContent.includes('language model') &&
                          !pubContent.includes('benchmark') &&
                          !pubContent.includes('multimodal');
            }

            pub.style.display = shouldShow ? 'block' : 'none';
          }
        });
      });
    });
  });
</script>
